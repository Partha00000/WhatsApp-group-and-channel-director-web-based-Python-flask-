WHATSAPP GROUPS DIRECTORY - MANUAL INSTALLATION
==============================================

SERVER: 172.236.173.149
DOMAIN: groupleft.com
PATH: /var/www/groupleft

ESSENTIAL FILES ONLY:
- app.py (Flask application)
- models.py (Database models)
- routes.py (Main routes - 404 error FIXED)
- admin_routes.py (Admin panel)
- forms.py (Form definitions)
- utils.py (Utility functions)
- whatsapp_api.py (WhatsApp integration)
- main.py (Entry point)
- app.wsgi (WSGI config)
- templates/ (HTML templates)
- static/ (CSS, JS, images)

INSTALLATION STEPS:
===================

1. INSTALL REQUIREMENTS
-----------------------
apt update && apt upgrade -y
apt install -y apache2 libapache2-mod-wsgi-py3 python3-pip python3-venv

2. INSTALL PYTHON PACKAGES
---------------------------
cd /var/www/groupleft
python3 -m venv venv
venv/bin/pip install flask flask-sqlalchemy flask-login flask-wtf flask-mail flask-ckeditor gunicorn beautifulsoup4 python-slugify requests wtforms email-validator

3. CREATE DATABASE
------------------
export DATABASE_URL="sqlite:///whatsapp_groups.db"
export SESSION_SECRET="groupleft-secret-key-2025"

venv/bin/python3 -c "
from app import app, db
from models import Category, Country, Language, Tag, User
from werkzeug.security import generate_password_hash

with app.app_context():
    db.create_all()
    
    # Admin user
    if not User.query.filter_by(username='Partha0000').first():
        admin = User(
            username='Partha0000',
            email='admin@groupleft.com',
            password_hash=generate_password_hash('PPBhakta++1'),
            is_admin=True
        )
        db.session.add(admin)
    
    # Sample data
    categories = ['Business', 'Technology', 'Entertainment', 'Education', 'Sports']
    for name in categories:
        if not Category.query.filter_by(name=name).first():
            db.session.add(Category(name=name, description=f'{name} related groups'))
    
    countries = [('United States', 'US'), ('India', 'IN'), ('United Kingdom', 'GB')]
    for name, code in countries:
        if not Country.query.filter_by(name=name).first():
            db.session.add(Country(name=name, code=code))
    
    languages = [('English', 'en'), ('Spanish', 'es'), ('French', 'fr')]
    for name, code in languages:
        if not Language.query.filter_by(name=name).first():
            db.session.add(Language(name=name, code=code))
    
    tags = ['popular', 'trending', 'active', 'community']
    for tag_name in tags:
        if not Tag.query.filter_by(name=tag_name).first():
            db.session.add(Tag(name=tag_name))
    
    db.session.commit()
    print('âœ… Database setup completed!')
"

4. CONFIGURE APACHE
-------------------
Create: /etc/apache2/sites-available/groupleft.conf

<VirtualHost *:80>
    ServerName groupleft.com
    ServerAlias www.groupleft.com
    DocumentRoot /var/www/groupleft
    
    WSGIDaemonProcess groupleft python-path=/var/www/groupleft python-home=/var/www/groupleft/venv
    WSGIProcessGroup groupleft
    WSGIScriptAlias / /var/www/groupleft/app.wsgi
    
    <Directory /var/www/groupleft>
        WSGIApplicationGroup %{GLOBAL}
        Require all granted
    </Directory>
    
    Alias /static /var/www/groupleft/static
    <Directory /var/www/groupleft/static>
        Require all granted
    </Directory>
    
    SetEnv DATABASE_URL "sqlite:////var/www/groupleft/whatsapp_groups.db"
    SetEnv SESSION_SECRET "groupleft-secret-key-2025"
</VirtualHost>

<VirtualHost *:443>
    ServerName groupleft.com
    ServerAlias www.groupleft.com
    DocumentRoot /var/www/groupleft
    
    WSGIDaemonProcess groupleft-ssl python-path=/var/www/groupleft python-home=/var/www/groupleft/venv
    WSGIProcessGroup groupleft-ssl
    WSGIScriptAlias / /var/www/groupleft/app.wsgi
    
    <Directory /var/www/groupleft>
        WSGIApplicationGroup %{GLOBAL}
        Require all granted
    </Directory>
    
    Alias /static /var/www/groupleft/static
    <Directory /var/www/groupleft/static>
        Require all granted
    </Directory>
    
    SetEnv DATABASE_URL "sqlite:////var/www/groupleft/whatsapp_groups.db"
    SetEnv SESSION_SECRET "groupleft-secret-key-2025"
</VirtualHost>

5. ENABLE SITE
--------------
a2dissite 000-default
a2ensite groupleft
a2enmod wsgi
a2enmod rewrite
systemctl restart apache2

6. SET PERMISSIONS
------------------
chown -R www-data:www-data /var/www/groupleft
chmod -R 755 /var/www/groupleft
chmod 644 /var/www/groupleft/whatsapp_groups.db

7. TEST INSTALLATION
--------------------
curl -I http://localhost
systemctl status apache2
tail -f /var/log/apache2/error.log

FINAL ACCESS:
=============
Site: https://groupleft.com
Admin: https://groupleft.com/admin
Login: Partha0000 / PPBhakta++1

KEY FEATURES:
- 404 group page error FIXED
- Both /group/slug and /group/category/slug work
- Admin panel fully functional
- AdSense-compliant redirect system
- Responsive Bootstrap design